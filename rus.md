# Создание более отзывчивого вебсайта

В начале этого года я только начинал заниматься редизайном [сайта 
нашей компании][1]. Мы в команде уже решили, что будем использовать 
отзывчивый дизайн, которому отдаём предпочтение при 
необходимости обеспечить поддержку различных устройств. После 
конференции An Event Apart в Бостоне и нескольких откровенных дискуссий на тему 
ограничений и сложностей в отзывчивом веб-дизайне, я понял, что наш подход к 
редизайну нуждается в некоторых доработках. 

К счастью, наш проект оказался отличной базой для экспериментов и подтолкнул нас 
к усовершенствованию процесса разработки отзывчивых сайтов. В этой 
статье я подробно опишу проделанную нами работу, в том числе изменения, которые 
пришлось внести в процесс разработки действительно отзывчивого сайта. 

![Устройства][Разнообразие телефонов]

*Разнообразие устройств, используемых для просмотра нашего сайта, достигло 
рекордного числа. (Автор фото [Блейк Пэттэрсон (Blake Patterson)][2])*

## Определяем цели

Первым шагом в работе над проектом стало создание списка плюсов и минусов нашего 
подхода к отзывчивому дизайну. Вот как выглядит этот список:

### Плюсы

1. Возможность разрабатывать, поддерживать и продвигать один-единственый сайт. 

2. Поддержка самых разных размеров экрана, а не только крайних случаев 
вроде больших мониторов и мобильных устройств.

3. Задел на будущее: внешний вид сайта подстраивается под любой размер 
экрана, а не только под размеры устройств, популярных на данный момент. 

### Минусы

1. Контент, предназначенный только для экранов с большим разрешением, 
загружается на устройства с маленьким разрешением и затем «выключается» с 
помощью  CSS media queries (медиавыражений), создавая ненужные загрузки. 

2. Поскольку разметка во всех случаях одна, мы не можем в зависимости 
от устройства или размера экрана менять последовательность элементов 
в коде страницы (или вовсе удалить некоторые из них). 

Вы наверняка заметили, что эти недостатки можно устранить сделав отдельную мобильную 
версию. **Мы хотели взять лучшее от обоих подходов** для нашего сайта: 
преимущества отзывчивого дизайна и отдельной версии для мобильных. 

## Контент прежде всего

Одно из главных отличий между отзывчивым дизайном и мобильной версией —
это контент или его компоненты, получаемые браузером. В мобильной версии сайта 
часто доступна только часть контента из десктопной версии сайта. 
Эта тема порождает бесконечные споры: приверженцы мобильной 
версии настаивают, что пользователи мобильных устройств хотят получать 
*только* тот контент, который является *важным* для них.

Проблема состоит в том, что *важность* контента для пользователя 
(любого пользователя) меняется в зависимости от ситуации. Если исключить 
контент, ориентируясь только на чьи-то предпочтения, результат, скорее всего, 
отпугнет и приведет в недоумение остальных пользователей, которые не вписываются 
в выбранный сценарий, исходя из которого вы решали что надо оставить, а что убрать. 

Мы склонны считать, что все пользователи должны иметь доступ ко *всему* контенту 
сайта, но хотим убедиться, что это будет правильным решением 
для нашего сайта и для пользователей. Чтобы определить правильный подход, мы 
обратились к аналитике и обнаружили, что **нет существенной разницы** 
между контентом, который просматривают пользователи мобильных и десктопных 
устройств. Контент, популярный среди пользователей десктопной версии, оказался
так же популярен среди пользователей мобильных устройств. 

Кроме того, мы сели и поговорили с некоторыми из наших клиентов, которые 
составляют большую часть аудитории нашего сайта. Мы задали им ряд вопросов, 
вроде «Какой контент Вы обычно ищете, просматривая сайт на компьютере?» и «А как 
насчёт планшета и смартфона?». Конечно же, вопросы были более глубокими, но эти примеры
позволят понять о чём мы спрашивали. И снова мы обнаружили, что посетители 
интересуются одним и тем же контентом вне зависимости от используемого устройства. 

## Данные диктуют направление

Результаты исследования укрепили нас в убеждении, что отзывчивый дизайн, 
предоставляющий доступ к одному и тому же контенту на всех устройствах, будет 
правильным выбором для нашего сайта. Это исследование также помогло нам 
определить какой контент не используется совсем. Обнаружив страницы, на которые 
наши пользователи не заходят, мы убрали их из карты сайта. **Контент, который 
пользуется популярностью, получил должное место** в иерархии и макете будущего 
сайта.

Пристальный взгляд на контент и сбор сведений о предпочтениях нашей аудитории в 
начале работы над проектом дал нам возможность **перейти к этапу разработки 
дизайна** с обоснованным планом относительно контента, который он должен учитывать. 

## Дизайн крайностей

Я слышал много доводов в пользу разработки прямо в браузере и признаю, что этот 
подход имеет много преимуществ. И всё же, после нескольких попыток работать над 
дизайном в браузере, я понял, что мне удобнее начинать с дизайна в Photoshop. Я 
ни в коем случае не берусь утверждать, что такая организация работы подойдёт 
всем, но она подходит мне, и именно так я начал свою работу над дизайном 
проекта. 

В разработке отзывчивого дизайна я использую метод, который называю «**дизайном 
крайностей**». Я начинаю с проектирования десктопной версии сайта: 
прорабатываю типографию проекта, стиль и общее визуальное 
представление, а также раскладку страницы для больших экранов. Когда я доволен этой 
версией дизайна, перехожу к работе над версией для маленьких экранов, т.е. 
«мобильной» версии вебсайта, используя те же визуальные концепции, но подгоняя 
макет под небольшой экран. 

В результате я получаю визуальные примеры двух раскладок, которые отличаются 
наибольшим образом - версии дизайна для самых больших экранов и для
самых маленьких. Эти два примера служат ориентиром при фронт-энд разработке 
сайта. 

![Версии][Две версии дизайна нашего сайта]

*«Предельные» версии нового дизайна нашего сайта*

## Сначала мобильные

В отзычивом дизайне подход «[сначала мобильные][3]» не является чем-то новым. Уже 
некоторое время он считается одним из лучших. Согласно этому подходу, начинать 
разработку следует с создания макета мобильного сайта, и затем с помощью 
медиазапросов адаптировать и расширять его по мере увеличения расширения экрана. 
В течение уже нескольких лет этот подход твёрдо 
удерживает свои позиции. В сочетании с планом **«сосредоточиться на контенте»** 
он помог нам справиться с одним из недостатков, обнаруженным в процессе 
работы над отзывчивостью нашего сайта - проблемой загрузки ненужного контента.

Проанализировав контент, мы убедились что всё наполнение нашего сайта 
**актуально и отвечает требованиям всех наших пользователей: и мобильных, и 
немобильных**. Проблема загрузки большого количества контента с последующей 
необходимостью прятать его с помощью CSS нас больше не волнует. Согласно подходу 
«сначала мобильные», изображения будут загружаться только на устройства для 
которых они предназначены. 

Например, наш новый дизайн предусматривал 
использование акварельной тестуры в качестве фонового изображения. 
Это довольно большое изображение, и оно должно быть включено только в дизайн сайта для 
больших экранов (шириной 600 пикселей и больше). Поскольку наш CSS начинается со 
стилей для мобильных устройств, это изображение никогда не попадёт на устройство 
с небольшим экраном, ведь медиазапрос, который его загружает, активируется 
только для больших экранов. Вот так выглядит медиазапрос, который задаёт фон для 
нашего элемента `html`:

    @media only screen and (min-width: 660px) {
        html {
            background: url(/images/bg-watercolor.jpg) no-repeat fixed center top;
        }
    }

Кроме добавления фонового изображения, этот медиазапрос, срабатывающий для 
экранов с шириной не менее 600 пикселей, добавляет ряд других изменений в макет 
страницы, преобразовывая его из версии для мобильных в версию для больших 
устройств. 

## Разработка ориентированная на дизайн, а не устройства

Когда мы только начали применять отзывчивый дизайн в веб-проектах, мы 
сконцентрировались на существующих устройствах (айфонах, айпадах в портретной и 
ландшафтной ориентации, ноутбуках, широкоэкранных мониторах, и т.д.) и 
расширениях экранов, что было заметно в медиазапросах, которые мы использовали. 
Со временем мы поняли, что это не лучший подход, поскольку он учитывал только те 
устройства и разрешения, которые были популярны в данный момент, а не те, 
которые станут популярны в будущем. Возможность соответствовать требованиям 
будущего - это одно из преимуществ отзывчивого дизайна. Чтобы максимально 
использовать это преимущество, мы отказались от разработки под конкретные 
устройства и позволили дизайну диктовать контрольные точки медиазапросов. 

Метод «сначала мобильные» определил исходный CSS нашего сайта. Прописав стили 
для мобильной версии сайта, мы открыли его в браузере и уменьшили окно до 
минимального размера макета (в CSS в качестве минимальной ширины сайта мы 
указали 320 пикселей). Постепенно **мы увеличили размер окна браузера чтобы 
посмотреть как будет вести себя макет**. По мере увеличения окна, мы 
заметили, что макет начал деформироваться. Для размеров при которых начиналась 
деформация, следовало создать новые медиазапросы, чтобы адаптировать макет. 

Для упрощения задачи **мы создали изображение**, которое установили фоном
рабочего стола. Это изображение состояло из вертикальных линий с началом 
отсчета на 320 пикселях (минимальная ширина нашего макета) и последующими 
интервалами в 100 пикселей начиная с отметки 400 пикселей. Мы использовали его 
как линейку при масштабировании окна браузера, чтобы определить в каких 
точках дизайн начинал ломаться, и использовать примерно эти же
значения в медиазапросах, добавляемых в CSS.

![Фон][Фоновое изображение, которое мы использовали чтобы определить контрольные точки для отзывчивого дизайна]

*Это фоновое изображение для рабочего стола можно использовать для определения 
контрольных точек отзывчивого дизайна*

Такой подход с **добавлением медиазапросов** в зависимости от требований дизайна, 
а не конкретных размеров устройств, позволяет создать сайт который будет 
отзывчивым к более широкому диапазону разрешений экрана. В результате вам придется 
добавить в файл CSS большее количество медиазапросов, чем если бы вы 
использовали ключевые точки, ориентируясь на размеры экранов конкретных 
устройств. Тем не менее, хотя количество медиазапросов и будет большим, сами по 
себе они, вероятно, будут очень короткими, так как каждый из них будет описывать 
лишь небольшое количество изменений, а не глобальные изменения, 
которые обычно требуются для запросов ориентированых на конкретные устройства. 

Количество медиазапросов существенно возрастает отчасти благодаря изменениям в 
навигации.

## Отзывчивая навигация

Навигация - это один из наиболее сложных аспектов в разработке отзывчивого 
дизайна. На нашем сайте есть четыре области навигации. 

1. Основная навигация;

2. Навигация, которую можно назвать «вспомогательной» — она связывает наш сайт с 
различными порталами и сервисами, которыми часто пользуются наши клиенты;

3. Навигация в подвале сайта;

4. Навигация внутри разделов, которая отображается в левой колонке вложенных 
страниц сайта (для широких экранов); 

Так как наш сайт строится по принципу «сначала мобильные», первым делом нужно 
определиться с навигацией для небольших экранов. Было принято решение 
**отключить отображение** всех областей навигации кроме основной. 

    #helpNav, .subNav, footer nav {
        display: none;
    }

Я ранее упоминал что нашей целью было **предотвратить** загрузку контента, 
который затем нужно было бы **отключить**. Мы действительно поставили перед 
собой такую цель, но в случае с навигацией мы вынуждены были принять тот факт, 
что загрузки лишнего контента не избежать. Мы не смогли найти другое, простое и 
в то же время удобное, решение. К счастью, лишний контент - это всего лишь 
несколько списков, так что влияние на трафик минимально. 

Вспомогательная навигация была признана не представляющей особого интереса для 
большинства пользователей, так как порталы, на которые она ссылается, 
ориентированы только на пользователей настольных компьютеров. Ну, это, конечно, 
слишком грубо и громко сказано. Логическим обоснованием наверное будет то, что 
эти порталы, которые принадлежат третьей стороне и не подчиняются нам, **не 
оптимизированы под мобильные устройства с очень маленькими экранами**, и услуги, 
которые они предлагают, нацелены на корпоративных клиентов с большими мониторами 
на столах. 

Такая ситуация определила наше решение удалить эту область навигации из версии 
для маленьких экранов, и за несколько месяцев работы сайта мы не получили ни 
одного комментария или жалобы касательно этого решения. В случае с двумя другими 
областями навигации (навигацией для вложенных страниц и навигацией подвала), в 
версии сайта для небольших разрешений их содержимое представлено как часть 
основной навигации, потому мы отключили все три области по умолчанию. 

В дальнейшем, когда размер экрана увеличивается и выходит за предел в 600 
пикселей, при котором начинает отображаться дизайн для больших разрешений, мы 
оформляем эти области навигации надлежащим образом. 

**Вот CSS для нашей вспомогательной навигации**

    #helpNav {
        display: block;
        position: absolute;
        top: 1px;
        right: 0px;
        width: 100%;
        text-align: right;
    }

    #helpNav ul {
        padding-left: 10px;
    }

    #helpNav li {
        display: inline;
        padding-right: 6px;
        padding-left: 6px;
        background-color: #2f6a98;
    }

    #helpNav a {
        font-size: 12px;
        padding: 0 6px;
        color: #FFF;
        border-radius: 20px;
    }

    #helpNav a:hover {
        background-color: #f66606;
    }

И для внутренней навигации:

    .subNav {
        display: block;
        width: 25%;
        float: left;
    }	

    .subNav h4 {
        padding-bottom: 8px
    }

    .subNav ul {
        list-style: disc;
        color: #c65204;
        padding: 0 0 20px 20px;
    }

    .subNav li {
        padding-bottom: 14px;
    }

    .subNav a {
        color: #186483;
        font-size: 21px;
        font-family: 'RokkittRegular', Times, "Times New Roman", serif;
        line-height: 1;
    }

И, наконец, навигация в подвале:

    footer nav {
        display: block;
        margin-top: 40px;
    }

    footer nav ul {
        list-style: none;
    }

    footer nav li {
        padding-bottom: 24px;
        width: 19%;
        padding: 0 5% 20px 0;
        float: left;
    }

    .innerNav li {
        width: 100%;
        float: none;
        padding-bottom: 4px;
    }

    footer nav a {
        color: #575454;
        font-size: 12px;
    }

    .innerNav a {
        font-weight: normal;
    }

## Пиксели против em

Как видите, мы использовали пиксели для медиазапросов. Как и множество других 
фронт-энд разработчиков, с начала работы с отзывчивым дизайном мы придерживались 
практики использования пикселей в медиазапросах. Однако, говоря о «создании 
более отзывчивого дизайна», я должен упомянуть статью о [пропорциональных 
медиазапросах с помощью em][4], которую нам посоветовали, когда эта статья ещё
была только написана и проходила редактирование. Если коротко, рекомендуется 
в медиазапросах перевести пиксели в em посредством деления всех пиксельных значений 
на размер шрифта `body`, что улучшит вид сайта при увеличении масштаба. 

Эта замечательная статья заставила нас пересмотреть наш подход к медиазапросам с 
использованием пикселей, и это очередный пример того, как мы работаем над нашим 
пониманием отзывчивого дизайна. Хотя мы и не использовали em в медизапросах при 
редизайне нашего сайта, сейчас мы экспериментируем с ними, и этот подход стоит 
того, чтобы о нём упомянуть. 

## Основная навигация

На широких экранах наша основная навигация представлена в виде горизонтальной 
полосы поперёк верхней части макета. На маленьких экранах вид основной навигации 
изменяется: в верхней части каждой страницы размещена большая кнопка «Меню», 
которая ведет к навигации, расположенной в нижней части страницы. Чтобы этого 
добиться, мы добавили ссылку с идентификатором `menuLink` и классом `tabButton` 
в шапку, код которой прописан в начале разметки. Затем мы разместили контейнер 
`div` с идентификатором `mainNav` в самом конце разметки. В этот контейнер 
помещена наша главная навигация, которая является простым неупорядоченным 
списком с несколькими вложенными списками для навигации по разделам на вложенных 
страницах. У нас также есть якорь с идентификатором `toTop`, который ведет в 
верхнюю часть страницы.

![Меню][Вид кнопки меню в макете для мобильных устройств]

*В верхней части макета для маленьких экранов есть кнопка «Menu»*

Продолжая придерживаться приципа «сначала мобильные», мы стилизировали ссылку 
«Меню», расположенную в верхней части маленьких экранов, под кнопку.

    #menuLink a {
        float: right;
        margin: -56px 8px 0 0;
    }

    .tabButton a {
        color: #FFF;
        font-family: 'RokkittRegular', Times, "Times New Roman", serif;
        font-size: 20px;
        background-color: #45829b;
        padding: 10px 12px;
        border-radius: 10px;
    }

    .tabButton a:hover {
        background-color: #f66606;
    }

Наше главное меню адаптировано под маленькие экраны:

    #mainNav {
        margin-top: 30px;
        width: 100%;
    }

    #mainNav #toTop a {
        float: right;
        margin: 0 8px 0 0;
        font-size: 20px;
    }

    #mainNav nav {
        padding-top: 80px;
    }

    #mainNav ul {
        list-style: none;
    }

    #mainNav li {
        background: #45829b;
        border-bottom: 1px solid #abc7d2;
        padding: 4px 10px 4px 15px;
    }

    #mainNav li:hover {
        background-color: #f66606;
    }

    #mainNav a {
        font-size: 24px;
        color: #FFF;
        font-family: 'RokkittRegular', Times, "Times New Roman", serif;
    }

![Мобильная навигация][Основная навигация нашего сайта в версии для маленьких экрано]

*Основная навигация нашего сайта в версии для маленьких экранов*

Наши подменю, скрытые по умолчанию, могут быть отображены в зависимости от 
страницы. Каждому из этих подменю присвоен уникальный идентификатор, например 
`servicesTab`, и для каждого раздела сайта для тэга `body` прописан класс. Для 
раздела «Компания» это класс `companyPage`. С помощью этого класса мы можем 
стилизировать целый раздел сайта. Класс, присвоенный разделу подменю, можно 
использовать чтобы отобразить это подменю когда выбран соответствующий раздел.

    .companyPage #companyTab ul,
    .newsPage #newsTab ul,
    .contactPage #contactTab ul,
    .servicesPage #servicesTab ul {
        display: block;
    }

![Навигация вложенных страниц][Навигация вложенных страниц в версии для небольших экранов]

*Отображение навигации вложенных страниц на небольших экранах*

## Увеличение

Когда дело доходит до экранов с большим разрешением, мы кардинально изменяем вид 
основной навигации (опять же, используя медиазапрос для экранов шириной 660 
пикселей и больше). Во-первых, отключаем отображение кнопок `menuLink` и `toTop`, 
так как они больше не нужны:

    #menuLink a, #toTop a {
        display: none;
    }

Затем стилизируем `mainNav` по горизонтали поперёк верхней части страницы 
согласно макету дизайна для больших экранов:

    #mainNav {
        position: absolute;
        top: 92px;
        margin: 18px 2% 0 2%;
        width: 96%;
        text-align: center;
    }

    #mainNav nav {
        padding: 5px 0;
        border-top: 1px solid #bacfd7;
        border-bottom: 1px solid #bacfd7;
    }

    #mainNav li {
        background: none;
        display: inline;
        border-bottom: 0;
        border-right: 1px solid #bebebe;
        padding: 0 6px 0 8px;
        margin: 4px 0;
    }

    #mainNav a {
        font-size: 16px;
        color: #45829b;
    }

    #mainNav a:hover {
        color: #f66606;
    }

Эти стили задают внешний вид нашей основной навигации, но при разработке с 
ориентацией на дизайн, а не на устройства, нам необходимо сделать несколько 
небольших изменений по мере увеличения размера экрана. Всего для отображения 
основной навигации на больших экранах прописано восемь разных размеров шрифта, размер 
изменяется по мере увеличения экрана и доступной площади. Подбор представления 
этой навигации, при котором она была бы удобна в использовании и визуально 
привлекательна, стал одним из вызовов, брошенных нам при работе над отзывчивым 
дизайном. 

Изначально размер нашего шрифта равен 16 пикселям. Как только ширина достигает 
767 пикселей, размер шрифта увеличивается до 18 пикселей. 

    @media only screen and (min-width : 767px) {
        #mainNav a {
            font-size: 18px;
        }
    }

Мы повторяем эту схему несколько раз, в конце-концов увеличивая шрифт до 27 
пикселей, когда вебсайт достигает своего максимального размера. Таким образом, 
навигация действительно масимально отзывчива к требованиям дизайна и к размерам 
экрана, используемого для просмотра сайта.

## CMS приходит на выручку

Мы предпочитаем использовать [ExpressionEngine][5], и дальше в статье будут 
описываться особенности разработки для этой платформы, однако в общем то, чего 
мы добились с помощью ExpressionEngine, без сомнения можно реализовать и на 
других популярных CMS-платформах. 

Одним из наиболее существенных недостатков отзывчивого дизайна является 
отсутствие возможности загружать разную разметку для разных устройств. Именно 
этот недостаток мы хотели исправить используя CMS. В процессе экспериментов и 
исследований мы наткнулись на статью под названием «[Достижение истинной 
адаптивности с помощью ExpressionEngine][6]». Согласно подходу, описанному в 
статье, мы использовали скрипт определения устройства, присваивающий системе 
переменную `mobile` или `full`. Впоследствии мы получили возможность загружать 
соответствующую разметку нашего сайта в зависимости от переменной. 

Использование определения устройства сделало возможными другие незначительные 
изменения для повышения удобства для посетителей с мобильными устройствами. Для 
нас это стало своего рода прогрессивным улучшением, ведь мы нашли качественное 
решение и затем попытались его еще немного улучшить. Обязательно прочитайте 
статью Криса Койера (Chris Coyier) [о похожем подходе к комбинированию отзывчивого 
дизайна и шаблонов для мобильных устройств][7], в которой он приводит доводы 
в пользу сочетания различных приёмов в разработке версии сайта для мобильных. 

## Начинаем с малого

Конечно, можно использовать эти переменные чтобы загружать абсолютно разную 
разметку на разные устройства, однако наш изначальный подход не предусматривал 
применение настолько кардинальных мер. Так как мы решили, что во всех версиях 
нашего сайта будет отображаться весь контент, мы использовали переменные для 
внесения небольших изменений в обьём загружаемого контента. Например, на 
главной странице нашего сайта отображается несколько анонсов контента 
доступного на сайте, в разделах «Культура» и «Осмотр проектов» возле каждого 
поста есть иллюстрация. 

Иллюстрации - это приятное дополнение, но явно не необходимое, поэтому мы 
исключили их из версии для мобильных устройств. Под этим я имел ввиду не что мы 
использовали CSS, чтобы отключить их отображение - в таком случае данные все 
равно загружались бы браузером; вместо этого мы использовали переменные, чтобы 
полностью исключить изображения из разметки. 

![Разделы][Два раздела главной страницы сайта]

*Приятно видеть иллюстрации к резюме статей, но они не влияют на контент или 
внешний вид страницы*

Синтаксис довольно простой. Когда переменная задана (в вышеупомянутой статье 
обьясняется, как это проще сделать, добавив маленький скрипт в системный файл 
`config.php`), её можно использовать в проверке через выражение `if`.  

    {if global:site_version=='full'}<img src="{teaser-image}" alt="{title}" />{/if}{if global:site_version=='mobile'} {title}{/if}

Это синтаксис ExpressionEngine, но вы можете без затруднений взглянуть на этот 
код и разобраться, что происходит. Если удовлетворено условие с переменной `full`, 
тогда `teaser-image` загружается из соответствующей записи в базе данных. Если 
верно условие с переменной `mobile`, тогда для статьи загружается `title`.

Тот же подход используется для разделов «Новости» и «Блог» на главной странице: 
при переменной `full` загружаются три коротких анонса статей, а при переменной `mobile` — только один. Синтаксис выглядит так:

    {exp:channel:entries channel="news" {if global:site_version=='full'}limit="3"{/if}{if global:site_version=='mobile'}limit="1"{/if}}

Здесь вы видите, что мы обращаемся к каналу ExpressionEngine с названием `news`. 
Мы используем переменные, чтобы определить сколько новых записей будет 
отображаться для этого канала, используя параметр `limit`.

## Еще один шаг вперед

В разделе «Культура» часто публикуются статьи с некоторым количеством 
изображений. В отличие от иллюстраций к анонсам на главной странице, изображения 
в статьях тесно связаны с контентом, так как помогают донести или 
подчеркнуть смысл статьи. В то время как изображения очень важны, они также 
довольно большие: ширина каждого составляет 650 пикселей, и в каждой статье 
таких изображений как минимум три, а иногда доходит до десяти. Поскольку на 
мобильных устройствах изображения будут отображаться в примерно вдвое 
уменьшенном размере, загрузка изображений в полном размере ведёт к излишним 
потреблениям ресурсов. Чтобы решить этот вопрос, мы вернулись к нашему 
определению устройства и переменным.

**Мы подготовили два набора изображений** для каждой статьи: комплект 
изображений в полном размере с шириной 650 пикселей и другой комплект в почти 
вдвое уменьшенном виде. Мы используем переменные в нашей статье (но сначала 
нужно разрешить добавление кода ExpressionEngine в шаблон нашей страницы), и 
добавляем разметку для обеих наборов изображений; и только один из наборов будет 
загружаться браузером. На мобильные устройства загружается комплект с меньшими 
изображениями, на все остальные - с изображениями нормального размера. 

Похожий подход применён для большой доски обьявлений на главной странице. Эти 
большие баннеры с текстом и изображениями используются в качестве главной 
площадки для продвижения важных новостей о будущих событиях, новых услугах и 
просто обьявлений. **Доска обьявлений - это еще одно полезное дополнение** 
только для больших мониторов. Опять же, мы используем переменные чтобы управлять 
загрузкой контейнера `billboard`, а также кода JavaScript, приводящего его 
содержимое в действие. Таким образом, мы получили эффективный инстумент, который 
позволяет посылать разную разметку на разные устройства и обойти один из 
недостатков, упомянутых в начале работы над проектом. 

Подход «сначала мобильные» и дополнительные возможности CMS позволяют нам 
существенно уменьшить размер главной страницы для мобильных устройств до 174.4 KB 
при том, что для настольных компьютеров её размер составляет 738.3 KB.

## Альтернативные решения

Меня сильно беспокоил следующий вопрос касательно подхода «сначала мобильные» и 
определения устройства: «Что будет если попытка определить устройство будет 
неудачной?». На мобильное устройство загрузится «нормальная» версия сайта, 
тем самым перечеркивая все наши усилия по созданию комфортной мобильной 
версии? Такая вероятность - это одна из причин, по которым я предпочитал не 
использовать решение «сначала мобильные», основанное на определении устройства. 

В проекте рассмотреном в этой статье, мы использовали определение устройства, но 
мы также запаслись множеством альтернативных решений на случай его сбоя по 
какой-либо причине. Так как дизайн является отзывчивым, даже если в браузер 
мобильного устройства будет загружена версия предназначенная для `full`, CSS 
подстроит макет сайта под это устройство.

Кроме того, так как при разработке мы придерживались принципа «сначала мобильные», 
элементы не предназначенные для небольших экранов (такие как огромная фоновая 
картинка упомянутая выше) также не будут загружены. И только то, что мы 
реализовали с помощью переменных для определения устройства, полностью выйдет 
из строя. **В худшем случае** при неудачном определении устройства в мобильной 
версии появятся несколько дополнительных изображений, или немного дополнительной 
разметки, или ненужный JavaScript. Сайт всё равно будет оставаться 
приспособленным для мобильных устройств. Совсем неплохо для «худшего случая». 

## Улучшение, а не достижение идеала

Несколько лет назад я услышал от нашего клиента слова, которые прочно застряли у 
меня в голове. При обсуждении его сайта он сказал:

> «Я не требую чтобы вы сделали мой сайт безупречным. Просто сделайте так, чтобы 
он стал лучше. Если мы постоянно будет делать его немного лучше - мы на верном пути.»

Эта мысль служила мне ориентиром все эти годы и не давала откинуть прогрессивные 
решения только потому что они небезупречны. 

Я знаю, описанный мной подход небезупречен, и ничего не имею против этого, так 
как он вывел наши возможности по созданию отзывчивого дизайна на новый уровень. 
Он помог преодолеть некоторые преграды, и теперь мы можем использовать лучшие решения
в других проектах. Да, перед нами еще много задач, для которых предстоит найти 
наиболее эффективное решение (например, загрузка высококачественных изображений 
для HD-мониторов, использование единиц em в медиазапросах, о чём упоминалось в 
статье), однако работа над этим и другими проектами продвигается в правильном 
направлении.  

Кто знает, может, однажды кто-то разработает «идеальный сайт». Тем временем, 
мы сосредоточимся на улучшении, а не совершенстве, и продолжим понемногу 
совершенствовать процесс разработки все более отзывчивого сайта.

##  Что думаете вы? 

Как вы разрабатываете отзывчивые сайты? Используете ли определение устройства 
или его отдельных свойств? В каких случаях вы предпочитаете использовать тот или 
иной способ? Мы ждём ваших комментариев!

[1]: http://www.envisionsuccess.net/
[2]: http://www.flickr.com/photos/35448539@N00/4773693893/
[3]: http://www.lukew.com/resources/mobile_first.asp
[4]: http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/
[5]: http://ellislab.com/expressionengine
[6]: http://designkarma.co.uk/blog/going-truly-adaptive-with-expressionengine
[7]: http://css-tricks.com/mixing-responsive-design-and-mobile-templates/
[8]: http://designkarma.co.uk/blog/going-truly-adaptive-with-expressionengine
[9]: http://www.envisionsuccess.net/our-culture

[Разнообразие телефонов]: img/phones-500.jpg?raw=true&amp;repo=building-a-better-responsive-website
[Две версии дизайна нашего вебсайта]: img/envision-extremes-500.jpg?raw=true&amp;repo=building-a-better-responsive-website
[Фоновое изображение, которое мы использовали чтобы определить контрольные точки для отзывчивого дизайна]: img/responsive-guide-sm-500.jpg?raw=true&amp;repo=building-a-better-responsive-website
[Вид кнопки меню в макете для мобильных устройств]: img/menu-mobile.jpg?raw=true&amp;repo=building-a-better-responsive-website
[Главная навигация сайта в версии для небольших экранов]: img/nav-mobile.jpg?raw=true&amp;repo=building-a-better-responsive-website
[Навигация вложенных страниц в версии для небольших экранов]: img/mobile-subnav.jpg?raw=true&amp;repo=building-a-better-responsive-website
[Два раздела главной страницы сайта]: img/envision-sections.jpg?raw=true&amp;repo=building-a-better-responsive-website
